<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Painel do Gestor - DevFit</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/dashboard-gestor.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="js/auth-util.js"></script>
    <script defer src="js/dashboard-gestor.js"></script>
  </head>
  <body>
    <header class="header">
      <nav class="nav-container">
        <a href="index.html" class="logo">DevFit <span class="user-badge gestor">ADMIN</span></a>
        <div class="nav-links">
          <a href="treinos.html">Treinos</a>
          <a href="avaliacoes.html">Avaliações</a>
          <a href="dashboard-gestor.html" class="active">Dashboard</a>
        </div>
        <div class="auth-container"></div>
      </nav>
    </header>

    <section class="dashboard-hero">
      <h2>Painel Administrativo</h2>
      <p>Monitoramento em tempo real de KPIs e métricas de desempenho</p>
    </section>

    <main class="dashboard-content">
      
      <h3 class="section-title">Financeiro</h3>
      <section class="kpi-grid">
        <div class="kpi-card">
          <h3>Receita Real</h3>
          <p class="kpi-value positive" id="kpi-receita">R$ 0,00</p>
          <small>Entradas confirmadas</small>
        </div>
        <div class="kpi-card">
          <h3>Despesas</h3>
          <p class="kpi-value negative" id="kpi-despesa">R$ 0,00</p>
          <small>Custos operacionais</small>
        </div>
        <div class="kpi-card">
          <h3>Lucro Líquido</h3>
          <p class="kpi-value" id="kpi-lucro">R$ 0,00</p>
          <small>Balanço do mês</small>
        </div>
        <div class="kpi-card">
          <h3>Faturamento Previsto</h3>
          <p class="kpi-value highlight" id="kpi-faturamento-previsto">R$ 0,00</p>
          <small>Baseado em mensalidades ativas</small>
        </div>
      </section>

      <h3 class="section-title">Membros & Retenção</h3>
      <section class="kpi-grid">
        <div class="kpi-card">
          <h3>Alunos Ativos</h3>
          <p class="kpi-value highlight" id="kpi-alunos-ativos">0</p>
          <small>Matrículas vigentes</small>
        </div>
        <div class="kpi-card">
          <h3>Alunos Inativos</h3>
          <p class="kpi-value" id="kpi-alunos-inativos" style="color: #ccc;">0</p>
          <small>Matrículas vencidas/canceladas</small>
        </div>
        <div class="kpi-card">
          <h3>Taxa de Retenção</h3>
          <p class="kpi-value positive" id="kpi-taxa-retencao">0%</p>
          <small>Alunos ativos / Total</small>
        </div>
        <div class="kpi-card">
          <h3>Total Cadastros</h3>
          <p class="kpi-value" id="kpi-total-users">0</p>
          <small>Usuários registrados no sistema</small>
        </div>
      </section>

      <h3 class="section-title">Operacional & Estrutura</h3>
      <section class="kpi-grid">
        <div class="kpi-card">
          <h3>Check-ins Hoje</h3>
          <p class="kpi-value highlight" id="kpi-checkins">0</p>
          <small>Acessos nas últimas 24h</small>
        </div>
        <div class="kpi-card">
          <h3>Ocupação Atual</h3>
          <p class="kpi-value" id="kpi-ocupacao">0%</p>
          <small>Baseado na cap. máx (<span id="txt-capacidade">0</span>)</small>
        </div>
        <div class="kpi-card">
          <h3>Total Equipamentos</h3>
          <p class="kpi-value" id="kpi-equip-total">0</p>
          <small>Patrimônio inventariado</small>
        </div>
        <div class="kpi-card">
          <h3>Em Manutenção</h3>
          <p class="kpi-value negative" id="kpi-equip-manutencao">0</p>
          <small>Equipamentos indisponíveis</small>
        </div>
      </section>

      <section class="charts-section">
        <div class="chart-container">
          <h3>Distribuição de Usuários</h3>
          <canvas id="usersChart"></canvas>
        </div>
        <div class="chart-container">
          <h3>Fontes de Receita</h3>
          <canvas id="revenueChart"></canvas>
        </div>
      </section>

      <section class="data-section">
        <div class="list-container">
          <div class="list-header">
            <h3>Usuários Recentes</h3>
            <button class="btn-action" onclick="window.location.href='cadastro.html'">+ Novo Usuário</button>
          </div>
          <table class="devfit-table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Email</th>
                <th>Perfil</th>
                <th>Plano</th>
              </tr>
            </thead>
            <tbody id="table-users-body"></tbody>
          </table>
        </div>

        <div class="list-container">
          <div class="list-header">
            <h3>Inventário de Equipamentos</h3>
            <button class="btn-action" onclick="alert('Funcionalidade futura')">+ Adicionar</button>
          </div>
          <table class="devfit-table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Qtd</th>
                <th>Valor Unit.</th>
                <th>Status</th> </tr>
            </thead>
            <tbody id="table-equip-body"></tbody>
          </table>
        </div>
      </section>
    </main>
  </body>
</html>
